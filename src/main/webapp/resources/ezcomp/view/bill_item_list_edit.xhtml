<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="billItems" />
        <cc:attribute name="editable" type="java.lang.Boolean" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <p:commandButton value="Download" ajax="false">
            <p:dataExporter fileName="bill_items" target="tblBillItems" type="xlsx" ></p:dataExporter>
        </p:commandButton>

        <p:dataTable 
            id="tblBillItems"
            value="#{cc.attrs.billItems}" var="bi" rowKey="#{bi.id}" >
            <f:facet name="header" >
                <h:outputText value="Bill Items" ></h:outputText>
            </f:facet>
            <p:column headerText="Item" >
                <h:outputText value="#{bi.id}" class="w-100 m-1"></h:outputText>
            </p:column>
            <p:column headerText="Item Name">
                <h:outputText value="#{bi.item.name}" ></h:outputText>
            </p:column>
            <p:column headerText="Referance Bill Item ID">
                <h:outputText value="#{bi.referanceBillItem.id}" ></h:outputText>
            </p:column>
            <p:column headerText="Pharmaceutical Bill Item ID">
                <h:outputText value="#{bi.pharmaceuticalBillItem.id}" ></h:outputText>
            </p:column>
            <p:column headerText="Quantity" class="text-end">
                <p:inputText value="#{bi.qty}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.qty}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Remaining Qty" class="text-end">
                <p:inputText value="#{bi.remainingQty}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.remainingQty}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Remaining Free Qty" class="text-end">
                <p:inputText value="#{bi.pharmaceuticalBillItem.remainingFreeQty}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.pharmaceuticalBillItem.remainingFreeQty}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Rate" class="text-end">
                <p:inputText value="#{bi.rate}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.rate}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Discount Rate" class="text-end">
                <p:inputText value="#{bi.discountRate}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.discountRate}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Margin Rate" class="text-end">
                <p:inputText value="#{bi.marginRate}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.marginRate}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Net Rate" class="text-end">
                <p:inputText value="#{bi.netRate}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.netRate}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>

            <p:column headerText="Hospital Fee" class="text-end">
                <p:inputText value="#{bi.hospitalFee}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.hospitalFee}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Staff Fee" class="text-end">
                <p:inputText value="#{bi.staffFee}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.staffFee}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Collecting Centre Fee" class="text-end">
                <p:inputText value="#{bi.collectingCentreFee}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.collectingCentreFee}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Other Fee" class="text-end">
                <p:inputText value="#{bi.otherFee}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.otherFee}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Gross Value" class="text-end">
                <p:inputText value="#{bi.grossValue}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.grossValue}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Discount" class="text-end">
                <p:inputText value="#{bi.discount}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.discount}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="VAT" class="text-end">
                <p:inputText value="#{bi.vat}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <p:outputLabel value="#{bi.vat}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Service Charge" class="text-end">
                <p:inputText value="#{bi.marginValue}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.marginValue}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Net Value" class="text-end">
                <p:inputText value="#{bi.netValue}" rendered="#{cc.attrs.editable}" class="w-100 m-1 text-end" />
                <h:outputText value="#{bi.netValue}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>
            <p:column headerText="Retired" class="text-end">
                <p:selectBooleanCheckbox value="#{bi.retired}" rendered="#{cc.attrs.editable}" class="text-end" />
                <p:outputLabel value="#{bi.retired ? 'Yes' : 'No'}" rendered="#{!cc.attrs.editable}" class="text-end" />
            </p:column>

        </p:dataTable>

    </cc:implementation>
</html>
