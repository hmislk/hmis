<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="billFees" />
        <cc:attribute name="editable" type="java.lang.Boolean" default="false"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>


        <p:dataTable value="#{cc.attrs.billFees}" var="bf" rowKey="#{bi.id}" >

            <p:column>
                <f:facet name="header">Fee ID</f:facet>
                <h:outputText value="#{bf.id}"/>
            </p:column>
            <p:column>
                <f:facet name="header">Item Name</f:facet>
                <h:outputText value="#{bf.billItem.item.name}"/>
            </p:column>
            <p:column>
                <f:facet name="header">Item Code</f:facet>
                <h:outputText value="#{bf.billItem.item.code}"/>
            </p:column>
            <p:column>
                <f:facet name="header">Department</f:facet>
                <h:outputText value="#{bf.billItem.item.department.name}"/>
            </p:column>
            <p:column class="text-end">
                <f:facet name="header">Gross Fee Value</f:facet>
                <h:outputText value="#{bf.feeGrossValue}" class="text-end" />
            </p:column>
            <p:column class="text-end">
                <f:facet name="header">Discount Fee Value</f:facet>
                <h:outputText value="#{bf.feeDiscount}" class="text-end" />
            </p:column>
            <p:column class="text-end">
                <f:facet name="header">Net Fee Value</f:facet>
                <h:outputText value="#{bf.feeValue}" class="text-end" />
            </p:column>
            <p:column class="text-end">
                <f:facet name="header">Fee Name</f:facet>
                <h:outputText value="#{bf.fee.name}" class="text-end" />
            </p:column>

            <p:column>
                <f:facet name="header">Speciality</f:facet>
                <h:outputText value="#{bf.fee.speciality.name}"/>
            </p:column>
            <p:column headerText="Payee">
                <p:cellEditor>  
                    <f:facet name="output"> 
                        <h:outputLabel value="#{bf.staff.person.name}"/>
                    </f:facet>  
                    <f:facet name="input">  
                        <p:selectOneMenu value="#{bf.staff}" 
                                         rendered="#{bf.fee.speciality != null}" 
                                         disabled="#{bf.paidValue != 0 or !webUserController.hasPrivilege('ChangeProfessionalFee')}">
                            <f:selectItem itemLabel="Select Staff"/>
                            <f:selectItems value="#{staffController.getSpecialityStaff(bip.fee.speciality)}" 
                                           var="bifs" 
                                           itemLabel="#{bifs.person.name}" 
                                           itemValue="#{bifs}"/>
                        </p:selectOneMenu>
                    </f:facet>  
                </p:cellEditor>  
            </p:column>

        </p:dataTable>

    </cc:implementation>
</html>
