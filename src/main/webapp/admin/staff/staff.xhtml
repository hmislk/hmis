<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="/admin/staff/admin_manage_staff_index.xhtml">

            <ui:define name="subcontent">

                <h:form >

                    <p:panel class="w-100" style="align-items: center;">
                        <f:facet name="header" >
                            <div class="w-100 flex-wrap">
                                <h:outputLabel value="Edit Staff Details" styleClass="mx-5"></h:outputLabel>

                                <p:commandButton value="Save" ajax="false" action="#{staffController.saveCurrentStaff()}" 
                                                 icon="fa fa-save" styleClass="ui-button-success m-2 mx-5"></p:commandButton>
                                <p:commandButton value="Back" ajax="false" action="#{staffController.navigateToListStaff()}" 
                                                 icon="fa fa-arrow-left" styleClass="ui-button-warning m-2"></p:commandButton>

                            </div>
                        </f:facet>

                        <p:tabView class="w-100 m-1">
                            <p:tab title="Personal Details" >
                                <p:panelGrid layout="tabular" columns="2" class="w-100">

                                    <p:outputLabel value="Name"></p:outputLabel>
                                    <p:inputText class="form-control" value="#{staffController.current.person.name}"></p:inputText>





                                    <p:outputLabel value="Code"></p:outputLabel>
                                    <p:inputText class="form-control" value="#{staffController.current.code}"></p:inputText>

                                    <p:outputLabel value="NIC / Passport"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.nic}"></p:inputText>

                                    <p:outputLabel value="Full Name"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.fullName}"></p:inputText>

                                    <p:outputLabel value="Name with Initials"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.nameWithInitials}"></p:inputText>

                                    <p:outputLabel value="Initials"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.initials}"></p:inputText>

                                    <p:outputLabel value="Surname"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.surName}"></p:inputText>

                                    <p:outputLabel value="Last Name"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.lastName}"></p:inputText>

                                    <p:outputLabel value="Date of Birth"></p:outputLabel>
                                    <p:calendar navigator="true"  class="w-100" inputStyleClass="w-100" value="#{staffController.current.person.dob}" pattern="#{sessionController.applicationPreference.longDateFormat}" ></p:calendar>

                                    <p:outputLabel value="Details"></p:outputLabel>
                                    <p:inputTextarea  class="form-control" value="#{staffController.current.person.description}"></p:inputTextarea>


                                </p:panelGrid>
                            </p:tab>
                            <p:tab title="Contact Details" >
                                <p:panelGrid columns="2" class="w-100" layout="tabular">
                                    <p:outputLabel value="Address"></p:outputLabel>
                                    <p:inputTextarea  class="form-control" value="#{staffController.current.person.address}"></p:inputTextarea>

                                    <p:outputLabel value="Fax"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.fax}"></p:inputText>

                                    <p:outputLabel value="Email"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.email}"></p:inputText>

                                    <p:outputLabel value="Mobile"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.mobile}"></p:inputText>

                                    <p:outputLabel value="Phone"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.person.phone}"></p:inputText>
                                </p:panelGrid>
                            </p:tab>

                            <p:tab title="Employment Details" >
                                <p:panelGrid columns="2" class="w-100" layout="tabular">

                                    <p:outputLabel value="Status"></p:outputLabel>
                                    <p:selectOneMenu class="form-control"  value="#{staffController.current.employeeStatus}">
                                        <f:selectItem itemLabel="Please select a speciality"/>
                                        <f:selectItems value="#{enumController.employmentStatuses}" var="es" itemLabel="#{es}" itemValue="#{es}" />
                                    </p:selectOneMenu>
                                    
                                     <p:outputLabel value="Date Joined"></p:outputLabel>
                                     <p:calendar class="form-control"  value="#{staffController.current.dateJoined}"></p:calendar>

                                    <p:outputLabel value="Registration"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.registration}"></p:inputText>

                                    <p:outputLabel value="Qualification"></p:outputLabel>
                                    <p:inputTextarea  class="form-control" value="#{staffController.current.qualification}"></p:inputTextarea>

                                    <p:outputLabel value="Designation"></p:outputLabel>
                                    <p:autoComplete   forceSelection="true" id="designation"
                                                      value="#{staffController.current.designation}" 
                                                      completeMethod="#{designationController.completeDesignation}" 
                                                      var="mys" 
                                                      itemLabel="#{mys.name}" 
                                                      itemValue="#{mys}"
                                                      class="form-control" 
                                                      inputStyleClass="w-100">               
                                    </p:autoComplete> 


                                    <p:outputLabel value="Staff Category"></p:outputLabel>
                                    <p:autoComplete   forceSelection="true" id="scat"
                                                      value="#{staffController.current.staffCategory}" 
                                                      completeMethod="#{staffCategoryController.completeStaffCategory}" 
                                                      var="des" 
                                                      itemLabel="#{des.name}" 
                                                      itemValue="#{des}"
                                                      class="form-control" 
                                                      inputStyleClass="w-100">               
                                    </p:autoComplete> 


                                    <p:outputLabel value="Order Number"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.orderNo}" ></p:inputText>

                                    <p:outputLabel value="Description"></p:outputLabel>
                                    <p:inputTextarea  class="form-control" value="#{staffController.current.description}"></p:inputTextarea>

                                    <p:outputLabel value="Speciality"></p:outputLabel>
                                    <p:selectOneMenu class="form-control"  value="#{staffController.current.speciality}">
                                        <f:selectItem itemLabel="Please select a speciality"/>
                                        <f:selectItems value="#{specialityController.items}" var="cat" itemLabel="#{cat.name}" itemValue="#{cat}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel value="Institution"></p:outputLabel>
                                    <p:autoComplete 
                                        forceSelection="true"
                                        value="#{staffController.current.institution}"
                                        completeMethod="#{institutionController.completeIns}" id="ins2"
                                        var="ix" 
                                        itemLabel="#{ix.name}" 
                                        itemValue="#{ix}" 
                                        class="w-100" 
                                        inputStyleClass="w-100"
                                        style="width: 500px;">
                                        <p:ajax event="itemSelect" process="@this" update="somDept" />
                                    </p:autoComplete>


                                    <p:outputLabel value="Department"></p:outputLabel>
                                    <p:selectOneMenu 
                                        id="somDept" 
                                        filter="true"
                                        filterMatchMode="contains"
                                        value="#{staffController.current.department}"
                                        class="w-100">
                                        <f:selectItem  itemLabel="Please select a Department"/>
                                        <f:selectItems 
                                            value="#{departmentController.getInsDepartments(staffController.current.institution)}" 
                                            var="d" 
                                            itemLabel="#{d.name}" itemValue="#{d}" 
                                            />
                                    </p:selectOneMenu>



                                </p:panelGrid>

                            </p:tab>

                            <p:tab title="Welfare" >
                                <p:panelGrid columns="2" class="w-100" layout="tabular">

                                    <p:outputLabel value="Credit Limit Qualified"></p:outputLabel>
                                    <p:inputText  class="form-control text-end" value="#{staffController.current.creditLimitQualified}" ></p:inputText>

                                    <p:outputLabel value="Current Credit Value"></p:outputLabel>
                                    <p:inputText 
                                        readonly="true" 
                                        class="form-control text-danger text-end" 
                                        value="#{staffController.current.currentCreditValue}" ></p:inputText>

                                    <p:outputLabel value="Annual Welfare Qualified"></p:outputLabel>
                                    <p:inputText  class="form-control text-end" value="#{staffController.current.annualWelfareQualified}" ></p:inputText>

                                    <p:outputLabel value="Annual Welfare Utilized"></p:outputLabel>
                                    <p:inputText  readonly="true" 
                                                  class="form-control text-danger text-end"  value="#{staffController.current.annualWelfareUtilized}" ></p:inputText>



                                </p:panelGrid>

                            </p:tab>

                            <p:tab title="Leave" >
                                <p:panelGrid columns="2" class="w-100" layout="tabular">

                                    <p:outputLabel value="Working Time for Overtime per Week"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.workingTimeForOverTimePerWeek}" ></p:inputText>

                                    <p:outputLabel value="Working Time for No Pay per Week"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.workingTimeForNoPayPerWeek}" ></p:inputText>

                                    <p:outputLabel value="Allowed Late In Leave"></p:outputLabel>
                                    <p:selectBooleanCheckbox value="#{staffController.current.allowedLateInLeave}"></p:selectBooleanCheckbox>

                                    <p:outputLabel value="Allowed Early Out Leave"></p:outputLabel>
                                    <p:selectBooleanCheckbox value="#{staffController.current.allowedEarlyOutLeave}"></p:selectBooleanCheckbox>

                                </p:panelGrid>

                            </p:tab>



                            <p:tab title="EPF ETF Details" >
                                <p:panelGrid columns="2" class="w-100" layout="tabular">


                                    <p:outputLabel value="Staff Code"></p:outputLabel>
                                    <p:inputText class="form-control" value="#{staffController.current.staffCode}"></p:inputText>

                                    <p:outputLabel value="Bank"></p:outputLabel>
                                    <p:selectOneMenu  class="form-control"  id="lstSelect" value="#{staffController.current.bankBranch}" style="min-width: 223px">
                                        <f:selectItems  value="#{bankController.items}" var="myItem" itemValue="#{myItem}" itemLabel="#{myItem.name}" ></f:selectItems>
                                    </p:selectOneMenu>

                                    <p:outputLabel value="AC No"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.acNo}"></p:inputText>

                                    <p:outputLabel value="EPF Account No"></p:outputLabel>
                                    <p:inputText  class="form-control"  value="#{staffController.current.epfAccountNo}"></p:inputText>

                                    <p:outputLabel value="Account No"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.accountNo}"></p:inputText>

                                    <p:outputLabel value="EPF No"></p:outputLabel>
                                    <p:inputText  class="form-control" value="#{staffController.current.epfNo}"></p:inputText>



                                </p:panelGrid>

                            </p:tab>

                        </p:tabView>

                    </p:panel>



                </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html>
